<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../sakura.png">
    <title>桜の小破屋</title>
    <script src="../js/vue.js"></script>
    <script src="./js/battle.js"></script>
    <script src="./js/main.js"></script>
    <!-- <script src="../js/jquery-3.6.0.min.js"></script> -->
    <link rel="stylesheet" href="./css/style.css">
    <style>
        #app .dataList .dataListLi {
            padding: 5px;
            margin-top: 10px;
            width: 100%;
            height: auto;
            border: solid 1px rgb(62, 235, 128);
            font-size: 1.3em;
            font-weight: 550;
            border-radius: 0.8vw;
        }
        
        #app .btn {
            width: 100%;
            height: 50px;
            vertical-align: center;
            line-height: 50px;
            text-align: center;
        }
        
        #app .btn .checkBtn {
            margin: 10px 20px;
            display: inline-block;
            width: 140px;
            height: 50px;
            border-radius: 20px;
            font-size: 1em;
            font-weight: 550;
        }
        
        #app .btn .confirmBtn {
            background: rgb(31, 137, 163, .8);
            color: rgb(17, 20, 204);
        }
        
        #app .btn .otherBtn {
            background: rgba(15, 218, 133, 0.8);
            color: rgb(100, 45, 9);
        }
        
        #app .attr {
            width: 100%;
        }
        
        #app .attr {
            text-align: center;
            width: 80%;
            margin: 10px 50px 0px 150px;
            border: 1px solid rgba(50, 132, 226, 0.863);
        }
        
        #app .attr .zous .zousInfo {
            width: 100%;
            height: 50px;
        }
        
        #app .attr .zous p {
            color: rgba(238, 146, 25, 0.8);
        }
        
        #app .attr .zous .zousInfo li {
            color: rgba(247, 74, 30, 0.8);
            display: inline-block;
            line-height: 50px;
            width: 16%;
            margin: 0px auto;
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="gameName">
            宙斯之战
        </div>
        <div class="dataList">
            <ul class="dataListUl" v-for="(data,key,index) in dataList">
                <li v-if="data.round" class="dataListLi">
                    {{data.round}}
                </li>
                <li v-if="data.appear" class="dataListLi">
                    {{data.appear}}
                </li>
                <li v-if="data.damage" class="dataListLi">
                    {{data.damage}}
                </li>
                <li v-if="data.leftBlood" class="dataListLi">
                    {{data.leftBlood}}
                </li>
                <li v-if="data.die" class="dataListLi">
                    {{data.die}}
                </li>
                <li v-if="data.xpget" class="dataListLi">
                    {{data.xpget}}
                </li>
                <li v-if="data.llup" class="dataListLi">
                    {{data.llup}}
                </li>
            </ul>
        </div>
        <div class="attr">
            <div class="zous">
                <p>宙斯状态:</p>
                <ul class="zousInfo">
                    <li>当前血量:{{vmZous.hp}}</li>
                    <li>当前攻击力:{{vmZous.atta}}</li>
                    <li>当前防御力:{{vmZous.defend}}</li>
                    <li>当前经验:{{vmZous.xp}}/{{vmZous.needXp}}</li>
                    <li>当前等级:{{vmZous.level}}</li>
                </ul>
            </div>
        </div>
        <div class="btn">
            <button class="checkBtn confirmBtn" @click="confirmBtn">{{leftBtn}}</button>
            <button class="checkBtn otherBtn" @click="otherBtn">点击添加list内容</button>
        </div>
    </div>

    <script>
        const zous = new Zous(100, 100, 50);
        const vm = new Vue({
            el: '#app',
            data: {
                dataList: [{}],
                leftBtn: '1',
                vmZous: zous,
            },
            methods: {
                confirmBtn() {
                    if (round % 5 == 0) {
                        ata(boss, zous);
                    } else {
                        ata(ani, zous);
                    }
                    continuFlag = true;
                    setTimeout(function() {
                        var showContent = document.querySelector(".dataList");
                        showContent.scrollTop = showContent.scrollHeight;
                    }, 5);
                },
                otherBtn() {
                    var data = {
                        damage: '不好世界'
                    }
                    this.dataList.push(data);
                    setTimeout(function() {
                        var showContent = document.querySelector(".dataList");
                        showContent.scrollTop = showContent.scrollHeight;
                    }, 5);
                }
            }
        });
        var round = 1;
        var continuFlag = true;

        function batt(callback) {
            if (callback && callback instanceof Function) {
                callback();
            }
        }
        while (round < 9) {
            vm.dataList.push({
                round: '第' + round + '回合'
            });
            if (round % 5 == 0) {
                var boss = new Boss(zous);
                vm.dataList.push({
                    appear: boss.appear
                });
                vm.leftBtn = "攻击Boss";
                continuFlag = false;
                //console.log(JSON.parse(ata(boss, zous)));
                //ata(boss, zous);
                /*returnVal = JSON.parse(ata(boss, zous));
                console.log(returnVal);
                vm.dataList.push(returnVal);*/
            } else {
                var ani = new Ani(zous);
                vm.dataList.push({
                    appear: ani.appear
                });
                vm.leftBtn = "攻击怪物";
                continuFlag = false;
                //console.log(JSON.parse(ata(ani, zous)));
                //console.log(ata(ani, zous));
                //ata(ani, zous);
                /*returnVal = JSON.parse(ata(ani, zous));
                console.log(returnVal);
                vm.dataList.push(returnVal);*/
            }
            if (zous.hp <= 0) break;
            round++;
        }
    </script>
</body>

</html>